<html>
  <head>
    <script src="https://unpkg.com/@optimizely/optimizely-sdk@3.3.0-beta/dist/optimizely.browser.umd.js"></script>
  </head>
  <body>
    <script>
      async function main() {
        optimizelySdk.setLogLevel('debug');
        optimizelySdk.setLogger(optimizelySdk.logging.createLogger());

        const optimizelyInstance = optimizelySdk.createInstance({
          sdkKey: '<PASTE YOUR SDK KEY HERE>',
          eventBatchSize: 20,
          eventFlushInterval: 5000, // ms
        });

        const result = await optimizelyInstance.onReady();
        console.log(`Optimizely ready: ${JSON.stringify(result)}`);

        // Add a log event notification listener
        /*
        optimizelyInstance.notificationCenter.addNotificationListener(
          optimizelySdk.enums.NOTIFICATION_TYPES.LOG_EVENT,
          (event) => {
            console.log('Got log event notification: ');
            console.log(JSON.stringify(event, null, 2));
          }
        );
        */

        const user = `user${Date.now()}`;

        // Generate impression events:

        // From A/B test
        // optimizelyInstance.activate('<PASTE YOUR EXPERIMENT KEY HERE>', user);

        // From Feature test
        // optimizelyInstance.isFeatureEnabled('<PASTE YOUR FEATURE KEY HERE>', user);

        // Generate conversion events
        // optimizelyInstance.track('<PASTE YOUR EVENT KEY HERE>', user);


        // Close the instance, which immediately flushes the current batch of events
        // optimizelyInstance.close();
      }

      main();
    </script>
  </body>
</html>
